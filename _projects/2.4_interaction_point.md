---
title: 2.4 Interaction Point
parent: 2. Linear Optics Measurements
nav_order: 4
layout: default
---

Now we will go back to the concept of the interaction point, since we care about the **star values** $$\beta^{*} \text{ and } s^{*}$$. To maximize luminosity, we would like both of these values to match the design optics.

# Star Values

The Interaction Region, the region containing the BPMs around the interaction point, is a drift space. The equation can be derived from accelerator concepts, but is stated here:

$$
\beta(s) = \beta^{*}(1 + (\frac{s - s^{*}}{\beta^{*}})^2)
$$

Using the two bpms (1, 2) that surround the IP, one could solve two simultaneous equations using $$\beta_1, s_1, \beta_2, s_2$$. One could use a curve fitting method to solve for the star values. Another method is to use $$\alpha$$ to solve for $$s^{*} \text{ then } \beta^{*}$$, although that increases the error on the measurement of all three variables.

# Statistical Analysis of Star Values

The star values could actually be solved for with a bit of algebra:

$$
\begin{aligned}
    \beta^* = \frac{(s_1 - s_2)^2 \left(\beta_1 + \beta_2 - 2Q\right)}{D}
        = \frac{N}{D} \\

    s^* = \frac{s_1 + s_2}{2}
        - \frac{(\beta_1 - \beta_2)\beta^*}{2(s_1 - s_2)}
\end{aligned}
$$

Where: $$N = (s_1 - s_2)^2 (\beta_1 + \beta_2 - 2Q), D = (\beta_1 - \beta_2)^2 + 4(s_1 - s_2)^2, \text{ and } Q = \sqrt{\beta_1\beta_2 - (s_1 - s_2)^2}$$. 

From these, the following errors can be calculated:

$$
\begin{aligned}
    \frac{\partial \beta^*}{\partial \beta_i} = \frac{1}{D^2}(\frac{\partial N}{\partial \beta_i}D \mp 2N(\beta_1 - \beta_2))
    \\
    \frac{\partial s^*}{\partial \beta_i} = \mp \frac{1}{2(s_1 - s_2)}(\beta^* \pm (\beta_1 - \beta_2)\frac{\partial \beta^*}{\partial \beta_i})
\end{aligned}
$$

Where $$i = 1, 2$$ for the upstream and downstream BPMs. For symmetric beta at IP8, $$\Delta \beta \rightarrow 0,  \beta_1 \approx \beta_2 \approx \beta_0, \text{ and } s_1 + s_2 = 0$$. $$\sigma_{\beta_1} \approx \sigma_{\beta_2} \approx \sigma_{\beta_0}$$ for most measurement methods. $$\sigma_{\beta^*} \text{ and } \sigma_{s^*}$$ can then be approximated as:

$$
\begin{align}
    \sigma_{\beta^*} \approx (1 + \frac{\beta_0}{Q_0})\sigma_{\beta_0}\sqrt{\frac{1 + \rho}{8}}
    \\
    \sigma_{s^*} \approx \frac{\beta^*}{2\Delta s}\sigma_{\beta_0}\sqrt{2(1 - \rho)}
\end{align}
$$

Where $$Q_0 = \sqrt{\beta_0^2 - (\Delta s)^2}$$ and $$\rho$$ is the correlation coefficient between $$\beta_1 \text{ and } \beta_2$$. These approximations demonstrate that $$\sigma_{\beta}$$ from both BPMs scale linearly with both $$\sigma_{\beta^*} \text{ and } \sigma_{s^*}$$. If $$\beta_1 \text{ and } \beta_2$$ are correlated, the covariance term will drive the error of the star values in opposing directions, as indicated by the equations.

<hr />

## Beta Function at the Interaction Region
This is an interactive plot of the beta function at an interaction region in relationship to the longitudinal coordinate ($$s$$) of the beam. The user can change the star values along with the error of $$\beta$$ at the BPMs. The user can also change the covariance coefficient of $$\beta_1 \text{ and } \beta_2$$ ($$\rho$$). This varies between optics measurement methods: CF and HA are around 0, OLS around 0.5, and TLS/GTLS around 0.9.

<div id="beta_function_IR" style="width: 100%; max-width: 700px; height: 600px;"></div>

<script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
<script src="/assets/js/2_linear_optics_measurements/beta_function_IR.js"></script>

<div style="max-width: 600px;">
    <label>
        \( \beta^* [m] \):
        <input id="bs-input" type="range" min=".05" max="10" step="0.01" value="0.9">
        <span id="bs-value">0.9</span>
    </label>
    <br>
    <label>
        \( s^* [m] \):
        <input id="ss-input" type="range" min="-1" max="1" step="0.01" value="0.0">
        <span id="ss-value">0.0</span>
    </label>
    <br>
    <label>
        \( \sigma_{\beta_1} [m] \):
        <input id="sb1-input" type="range" min="0.0" max="10.0" step="0.01" value="0.0">
        <span id="sb1-value">0.0</span>
    </label>
    <br>
    <label>
        \( \sigma_{\beta_2} [m] \):
        <input id="sb2-input" type="range" min="0.0" max="10.0" step="0.01" value="0.0">
        <span id="sb2-value">0.0</span>
    </label>
    <br>
    <label>
        \( \rho \):
        <input id="rho-input" type="range" min="0.0" max="1.0" step="0.01" value="0.0">
        <span id="rho-value">0.0</span>
    </label>
    <br>
    <!-- <strong>\( \gamma = \frac{1 + \alpha^2}{\beta} = \) <span id="gam-value"></span></strong>
    <br> -->
    <button id="reset-button" style="margin-top: 10px;">
    RESET
    </button>
<div>

<hr />